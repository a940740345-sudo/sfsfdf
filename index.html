<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>EPhone</title>
  <link rel="stylesheet" href="style.css">
  <link rel="apple-touch-icon" href="https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1758510900942_qdqqd_djw0z2.jpeg">
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="EPhone">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="icon" type="image/png" href="https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1756312261242_qdqqd_g0eriz.jpeg">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <script src="https://unpkg.com/dexie/dist/dexie.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>
  <script src="https://phoebeboo.github.io/mewoooo/pp.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/streamsaver@2.0.6/StreamSaver.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
  <script src="script.js" defer="defer"></script>
</head>
<body>
  <div id="phone-screen">
    <div id="status-bar"> <span id="status-bar-time">12:00</span>
      <div id="status-bar-battery" class="battery-container"> <span class="battery-text">--%</span>
        <div class="battery-icon">
          <div class="battery-level"></div>
        </div>
      </div>
    </div>
    <div id="lock-screen">
        <div id="lock-screen-content">
            <div class="lock-icon">üîì</div>
            <div class="lock-time-container">
                <div id="lock-date">1Êúà1Êó• ÊòüÊúü‰∏Ä</div>
                <div id="lock-time">12:00</div>
            </div>
            
            <div id="lock-password-area" style="display: none;">
                <div class="lock-instruction">ËæìÂÖ•ÂØÜÁ†Å</div>
                <div class="lock-dots">
                    <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
                </div>
                <div class="lock-keypad">
                    <div class="key" data-num="1">1</div>
                    <div class="key" data-num="2">2<br><span>ABC</span></div>
                    <div class="key" data-num="3">3<br><span>DEF</span></div>
                    <div class="key" data-num="4">4<br><span>GHI</span></div>
                    <div class="key" data-num="5">5<br><span>JKL</span></div>
                    <div class="key" data-num="6">6<br><span>MNO</span></div>
                    <div class="key" data-num="7">7<br><span>PQRS</span></div>
                    <div class="key" data-num="8">8<br><span>TUV</span></div>
                    <div class="key" data-num="9">9<br><span>WXYZ</span></div>
                    <div class="key empty"></div>
                    <div class="key" data-num="0">0</div>
                    <div class="key delete" data-action="delete">‚å´</div>
                </div>
                <div class="lock-cancel-btn">ÂèñÊ∂à</div>
            </div>
            
            <div id="lock-swipe-area">
                <div class="swipe-bar"></div>
            </div>
        </div>
    </div>
    <div id="notification-bar"><img id="notification-avatar" src="">
      <div id="notification-content">
        <div class="name"></div>
        <div class="message"></div>
      </div>
    </div>
<div id="dynamic-island-content">
  <img id="island-album-art" src="">
  <div id="island-lyric-container">
    <span id="island-lyric-text"></span>
  </div>
</div>

    <div id="chat-interface-screen" class="screen">
      <div id="gomoku-overlay">
        <div id="gomoku-content-wrapper"> <canvas id="gomoku-board"></canvas>
          <div id="gomoku-controls"> <button id="close-gomoku-btn">Êî∂Ëµ∑Ê£ãÁõò</button> </div>
        </div>
      </div>
      <div id="reading-overlay">
        <div id="reading-restore-btn" style="display: none;">üìñ</div>
        <div id="reading-window">
          <div class="reading-header"> <span id="reading-title">Êú™ÈÄâÊã©‰π¶Á±ç</span>
            <div class="reading-controls"> <button id="toggle-reading-fullscreen-btn" title="ÂàáÊç¢ÂÖ®Â±è">
        <svg class="icon-maximize" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
        </svg>
        <svg class="icon-minimize" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
            <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>
        </svg>
    </button><button id="minimize-reading-btn" title="ÊúÄÂ∞èÂåñ" style="font-size: 20px; line-height: 1;"> <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round">
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg> </button> <button id="open-reading-library-btn" title="ÊâìÂºÄ‰π¶Â∫ì" style="font-size: 22px; line-height: 1;"> <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg></button> <button id="close-reading-btn" title="ÂÖ≥Èó≠"> <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg> </button></div>
          </div>
          <div id="reading-content">
            <p>ÁÇπÂáª‚ÄúÂØºÂÖ•‚ÄùÊåâÈíÆÔºå<br>‰ªéÊú¨Âú∞.txtÊñá‰ª∂ÊàñÁΩëÁªúURLÂä†ËΩΩ‰π¶Á±çÂÜÖÂÆπ„ÄÇ</p>
          </div>
          <div class="reading-footer"> <button id="prev-page-btn">‰∏ä‰∏ÄÈ°µ</button> <span id="page-indicator">0 / 0</span> <button id="next-page-btn">‰∏ã‰∏ÄÈ°µ</button> </div>
        </div>
      </div><input type="file" id="book-upload-input" accept=".txt, text/plain" hidden>
      <div class="header">
        <div class="default-controls"> <span class="back-btn" id="back-to-list-btn">‚Äπ</span>
          <div id="global-lyrics-bar"></div>
          <div id="chat-header-title-wrapper"> <span id="chat-header-title">ËÅäÂ§©ÂØπË±°</span>
            <div id="chat-header-status"> <span class="status-dot"></span> <span class="status-text">Âú®Á∫ø</span> </div>
          </div>
          <div class="header-actions"> <span class="action-btn" id="open-memory-screen-btn" title="ÈïøÊúüËÆ∞ÂøÜ"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M12 6L9 9L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M21 5V19C21 20.1046 20.1046 21 19 21H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg> </span> <span class="action-btn" id="listen-together-btn" title="‰∏ÄËµ∑Âê¨"><img src="https://i.postimg.cc/dV8sdNcx/210-20250618115221.png" alt="‰∏ÄËµ∑Âê¨"></span> <span class="action-btn" id="chat-settings-btn" title="ËÅäÂ§©ËÆæÁΩÆ"><img
                src="https://i.postimg.cc/bvPq64cv/CCA834-BA-5-A90-408-D-94-FA-7-EE156-B6-A765.png" alt="ËÆæÁΩÆ"></span> </div>
        </div>
        <div class="selection-controls"> 
          <span id="selection-cancel-btn" title="ÂèñÊ∂à"> 
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
               <line x1="18" y1="6" x2="6" y2="18"></line>
               <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </span> 

          <span id="selection-count"></span>
          
          <div class="header-actions"> 
            <span id="selection-screenshot-btn" class="action-btn" title="ÈïøÊà™Âõæ"> 
               <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                  <circle cx="12" cy="13" r="4"></circle>
               </svg>
            </span> 
            <span id="selection-favorite-btn" class="action-btn" title="Êî∂Ëóè"> 
               <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
               </svg>
            </span> 
            <span id="selection-share-btn" class="action-btn" title="ÂàÜ‰∫´"> 
               <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="18" cy="5" r="3"></circle>
                  <circle cx="6" cy="12" r="3"></circle>
                  <circle cx="18" cy="19" r="3"></circle>
                  <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                  <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
               </svg>
            </span> 
            <span id="selection-soft-delete-btn" class="action-btn" title="Âà†Èô§(ÈÄöÁü•AI)"> 
               <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
               </svg>
            </span>
            <span id="selection-erase-btn" class="action-btn" style="color: #ff3b30;" title="ÂΩªÂ∫ïÂà†Èô§">
               <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20 20H7L3 16C2 15 2 13 3 12L13 2L22 11L20 20Z"></path>
                  <path d="M17 17L7 7"></path>
               </svg>
            </span> 
          </div>
        </div>
      </div>
      <div id="chat-messages">
        <div id="typing-indicator">ÂØπÊñπÊ≠£Âú®ËæìÂÖ•...</div>
      </div>
      <div id="chat-input-area">
        <div id="chat-at-mention-popup" class="at-mention-popup"></div>
        <div id="reply-preview-bar">
          <div class="reply-preview-content">
            <div class="sender">ÂõûÂ§ç xxx:</div>
            <div class="text">Ë¢´ÂºïÁî®ÁöÑÊ∂àÊÅØÂÜÖÂÆπ...</div>
          </div> <span id="cancel-reply-btn">√ó</span>
        </div>
        <div id="chat-input-actions-top"> 
            <button id="open-sticker-panel-btn" class="chat-action-icon-btn action-button" title="Ë°®ÊÉÖÈù¢Êùø">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                    <line x1="9" y1="9" x2="9.01" y2="9"></line>
                    <line x1="15" y1="9" x2="15.01" y2="9"></line>
                </svg>
            </button> 
            <button id="send-photo-btn" class="chat-action-icon-btn action-button" title="ÂèëÈÄÅÁÖßÁâá">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                    <circle cx="12" cy="13" r="4"></circle>
                </svg>
            </button> 
            <button id="upload-image-btn" class="chat-action-icon-btn action-button" title="‰∏ä‰º†ÂõæÁâá"> 
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 3.5H3C2.44772 3.5 2 3.94772 2 4.5V19.5C2 20.0523 2.44772 20.5 3 20.5H21C21.5523 20.5 22 20.0523 22 19.5V4.5C22 3.94772 21.5523 3.5 21 3.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    <path d="M16.5 13.5C17.6046 13.5 18.5 12.6046 18.5 11.5C18.5 10.3954 17.6046 9.5 16.5 9.5C15.3954 9.5 14.5 10.3954 14.5 11.5C14.5 12.6046 15.3954 13.5 16.5 13.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    <path d="M22 14.5L18 10.5L10.3333 18.5M12.5 16L9 12.5L2 19.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg> 
            </button>
            <button id="transfer-btn" class="chat-action-icon-btn action-button" title="ËΩ¨Ë¥¶">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="6" width="20" height="12" rx="2"></rect>
                    <circle cx="12" cy="12" r="2"></circle>
                    <path d="M6 12h.01M18 12h.01"></path>
                </svg>
            </button>
            <button id="voice-message-btn" class="chat-action-icon-btn action-button" title="ÂèëÈÄÅËØ≠Èü≥">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                    <path d="M12 19v4"></path>
                    <path d="M8 23h8"></path>
                </svg>
            </button> 
            <button id="send-waimai-request-btn" class="chat-action-icon-btn action-button" title="ÂèëËµ∑Â§ñÂçñËØ∑Ê±Ç">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <path d="M16 10a4 4 0 0 1-8 0"></path>
                </svg>
            </button> 
            <button id="video-call-btn" class="chat-action-icon-btn action-button" title="ËßÜÈ¢ëÈÄöËØù">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="23 7 16 12 23 17 23 7"></polygon>
                    <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                </svg>
            </button> 
            <button id="group-video-call-btn" class="chat-action-icon-btn action-button" title="Áæ§ËßÜÈ¢ëÈÄöËØù">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </button> 
            <button id="send-poll-btn" class="chat-action-icon-btn action-button" title="ÂèëËµ∑ÊäïÁ•®">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M8 6h10"></path>
                    <path d="M6 6h.01"></path>
                    <path d="M8 12h10"></path>
                    <path d="M6 12h.01"></path>
                    <path d="M8 18h10"></path>
                    <path d="M6 18h.01"></path>
                </svg>
            </button> 
            <button id="share-link-btn" class="chat-action-icon-btn action-button" title="ÂàÜ‰∫´ÈìæÊé•">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path>
                </svg>
            </button> 
            <button id="share-location-btn" class="chat-action-icon-btn action-button" title="ÂÖ±‰∫´‰ΩçÁΩÆ">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                </svg>
            </button> 
            <button id="gomoku-btn" class="chat-action-icon-btn action-button" title="‰∫îÂ≠êÊ£ã"> 
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <circle cx="12" cy="12" r="4"></circle>
                    <circle cx="12" cy="12" r="7"></circle>
                </svg> 
            </button> 
            <button id="open-shopping-btn" class="chat-action-icon-btn action-button" title="Ë¥≠Áâ©"> 
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg> 
            </button> 
            <button id="pat-btn" class="chat-action-icon-btn action-button" title="Êãç‰∏ÄÊãç" style="display: none;"> 
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M16 5.02c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M14.5 11.02c0 .83-.67 1.5-1.5 1.5v0c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5v0c.83 0 1.5.67 1.5 1.5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M5.5 14.52l-1.92-1.92c-.34-.34-.34-.89 0-1.23l3.58-3.58c.34-.34.89-.34 1.23 0l1.92 1.92c.34.34.34.89 0 1.23l-3.58 3.58c-.34.34-.89.34-1.23 0Z" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
                </svg> 
            </button> 
            <button id="edit-last-response-btn" class="chat-action-icon-btn action-button" title="ÂØºÊºîÊ®°ÂºèÔºöÁºñËæëAI‰∏ä‰∏ÄËΩÆÁöÑÂÆåÊï¥ÂìçÂ∫î"> 
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 20h9"></path>
                    <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                </svg> 
            </button> 
            <button id="regenerate-btn" class="chat-action-icon-btn action-button" title="ÈáçÊñ∞ÁîüÊàêÂõûÂ§ç" style="display: flex;"> 
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4"></path>
                    <path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"></path>
                </svg> 
            </button> 
            <button id="propel-btn" class="chat-action-icon-btn action-button" title="Êé®ËøõÂâßÊÉÖ" style="display: flex;"> 
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="13 19 22 12 13 5 13 19"></polygon>
                    <polygon points="2 19 11 12 2 5 2 19"></polygon>
                </svg> 
            </button> 
            <button id="show-announcement-board-btn" class="chat-action-icon-btn action-button" title="Áæ§ÂÖ¨ÂëäÊùø" style="display: none;"> 
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M21.782 6.132a1 1 0 0 0-1.053-.08l-4.729 2.489a1 1 0 0 0-.5.88v4.158a1 1 0 0 0 .5.88l4.729 2.489a1 1 0 0 0 1.053-.08a1 1 0 0 0 .499-.921V7.052a1 1 0 0 0-.499-.92zm-6 3.207L11 7.05v9.9l4.782-2.281V9.339zM10 6H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h6V6z" />
                </svg> 
            </button>
            <button id="werewolf-game-btn" class="chat-action-icon-btn action-button" title="Áãº‰∫∫ÊùÄ" style="display: none;"> 
                <svg width="24" height="24" viewBox="0 0 512 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M332.6 128.5c-61.1 0-110.5 49.4-110.5 110.5 0 23.4 7.3 45.1 19.9 63.3-19.3 6.3-40.1 9.7-61.9 9.7-88.2 0-160-71.8-160-160s71.8-160 160-160c5.3 0 10.5.3 15.6.8C202.9 44.1 160 0 160 0s-53.3 44.1-45.9 92.5c-48.4 24.3-82.1 73.4-82.1 129.6 0 80.9 65.5 146.4 146.4 146.4 20.2 0 39.4-4.1 56.8-11.5 24.1 33.6 63.3 56.8 107.4 56.8 7.2 0 14.2-0.6 21-1.7 15.2 24.2 41.2 41.1 71.6 41.1 44.7 0 80.9-36.2 80.9-80.9 0-25.2-11.5-47.7-29.6-62.6 11.6-16.1 18.4-35.6 18.4-56.5C443.1 177.9 393.7 128.5 332.6 128.5zM180.1 85.8c-52.1 0-94.4 42.3-94.4 94.4s42.3 94.4 94.4 94.4 94.4-42.3 94.4-94.4S232.2 85.8 180.1 85.8zM332.6 170.9c-37.8 0-68.4 30.6-68.4 68.4s30.6 68.4 68.4 68.4 68.4-30.6 68.4-68.4S370.4 170.9 332.6 170.9z"></path>
                </svg>
            </button>
            <button id="read-together-btn" class="chat-action-icon-btn action-button" title="‰∏ÄËµ∑ËØª‰π¶"> 
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                </svg>
            </button> 
            <button id="open-nai-gallery-btn" class="chat-action-icon-btn action-button" title="NAIÁîªÂªä">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 3l1.91 5.86L20 10.9l-5.86 1.91L12 18.6l-1.91-5.86L4 10.9l5.86-1.91L12 3z"/>
                    <path d="M5 3l1.5 4.5L11 9l-4.5 1.5L5 12l-1.5-4.5L-1 6l4.5-1.5L5 3z"/>
                    <path d="M19 15l-1.5 4.5L13 21l4.5-1.5L19 18l1.5 4.5L25 21l-4.5-1.5L19 15z"/>
                </svg>
            </button>
            <button id="open-quick-reply-btn" class="chat-action-icon-btn action-button" title="Âø´Êç∑ÂõûÂ§ç">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                </svg>
            </button>
            <button id="open-todo-list-btn" class="chat-action-icon-btn action-button" title="ÂæÖÂäû‰∫ãÈ°π">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 11l3 3L22 4"></path>
                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                </svg>
            </button>
            
            <button id="octopus-mode-btn" class="chat-action-icon-btn action-button" title="Â∞èÁ´†È±ºÊ®°Âºè" onclick="document.getElementById('octopus-mode-modal').classList.add('visible')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 22c4.97 0 9-1.8 9-4V9c0-4.97-4.03-9-9-9s-9 4.03-9 9v9c0 2.2 4.03 4 9 4z"></path>
                    <path d="M9 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path>
                    <path d="M15 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path>
                    <path d="M9 15s1.5 1 3 1 3-1 3-1"></path>
                    <path d="M5.5 20v-3"></path>
                    <path d="M18.5 20v-3"></path>
                </svg>
            </button>
        </div>
        <div id="chat-input-main-row"> <button id="chat-expand-btn" class="chat-action-icon-btn action-button" title="Â±ïÂºÄÂäüËÉΩ">+</button><textarea id="chat-input" rows="1" placeholder="ËæìÂÖ•Ê∂àÊÅØ..."></textarea>
          <div id="input-actions-wrapper"> <button id="wait-reply-btn" title="Á≠âÂæÖÂõûÂ§ç"><img src="https://i.postimg.cc/q72zq80N/ECE92-BBC-BE57-48-E9-BB2-C-345-B6019-C4-B2.png" alt="Á≠âÂæÖÂõûÂ§ç"></button> <button id="send-btn" class="action-button">ÂèëÈÄÅ</button> </div>
        </div>
      </div>
      <div id="chat-lock-overlay">
        <div id="chat-lock-content"></div>
      </div>
<div id="nai-gallery-panel">
    <div id="nai-gallery-panel-header">
        <span class="panel-btn" id="close-nai-gallery-btn" data-lang-key="cancel">ÂèñÊ∂à</span>
        
        <div id="nai-gallery-tabs">
            <div class="nai-gallery-tab active" data-tab-id="local">Êú¨Âú∞</div>
            <div class="nai-gallery-tab" data-tab-id="cloud">ÂõæÂ∫ä</div>
        </div>
        
        <div style="display: flex; gap: 10px;">
            <span class="panel-btn" id="manage-nai-gallery-btn">ÁÆ°ÁêÜ</span>
        </div>
    </div>
    
    <div id="nai-gallery-grid-container">
        <div id="nai-gallery-grid-local" class="nai-gallery-page active">
            </div>
        
        <div id="nai-gallery-grid-cloud" class="nai-gallery-page">
            </div>
    </div>
    
  
    
<div id="nai-gallery-action-bar">
    <label class="select-all-label" style="display: flex; align-items: center; gap: 5px;">
        <input type="checkbox" id="select-all-nai-gallery-checkbox"> ÂÖ®ÈÄâ
    </label>
    <button id="export-selected-nai-gallery-btn" class="action-bar-btn" style="background-color: #17a2b8; display: none; font-size: 14px; padding: 10px 15px;">ÂØºÂá∫ (0)</button>
    <button id="download-selected-nai-gallery-btn" class="action-bar-btn" style="background-color: #007bff; font-size: 14px; padding: 10px 15px;">‰∏ãËΩΩ (0)</button>
   <button id="upload-selected-nai-gallery-btn" class="action-bar-btn" style="background-color: #4cd964; display: none; font-size: 14px; padding: 10px 15px;">‰∏ä‰º† (0)</button>
    <button id="delete-selected-nai-gallery-btn" class="action-bar-btn" style="font-size: 14px; padding: 10px 15px;">Âà†Èô§ (0)</button>
</div>
</div>
      <div id="sticker-panel">
        <div id="sticker-panel-header"> <span class="panel-btn" id="close-sticker-panel-btn"data-lang-key="cancel">ÂèñÊ∂à</span> <span class="title">ÊàëÁöÑË°®ÊÉÖ</span>
          <div style="display: flex; gap: 10px;"> <span class="panel-btn" id="manage-sticker-categories-btn">ÂàÜÁ±ª</span> <span class="panel-btn" id="manage-stickers-btn">ÁÆ°ÁêÜ</span> <span class="panel-btn" id="add-sticker-batch-btn">ÊâπÈáè</span> <span class="panel-btn" id="upload-sticker-btn">‰∏ä‰º†</span> </div>
        </div>
        <div id="sticker-category-tabs"></div>
        <div id="sticker-search-container"> <input type="search" id="sticker-search-input" placeholder="ÊêúÁ¥¢Ë°®ÊÉÖÂêçÁß∞..."></div>
        <div id="sticker-grid"></div>
        <div id="sticker-action-bar"> <label class="select-all-label" style="display: flex; align-items: center; gap: 5px;"> <input type="checkbox" id="select-all-stickers-checkbox"> ÂÖ®ÈÄâ </label> <button id="export-selected-stickers-btn" style="background-color: #007bff;">ÂØºÂá∫ (0)</button><button id="delete-selected-stickers-btn">Âà†Èô§ (0)</button> </div>
      </div> <input type="file" id="sticker-upload-input" accept="image/*" style="display: none;"> <input type="file" id="image-upload-input" accept="image/*" style="display: none;">
      <div id="music-player-overlay">
        <div class="music-player-window">
          <div class="music-player-top-actions">
            <div class="top-left-cluster"> <button id="music-return-btn">‚Äπ</button> <button id="music-exit-btn">√ó</button> </div>
            <div style="display: flex; align-items: center; gap: 15px;"> <button id="toggle-fullscreen-btn" title="ÂàáÊç¢ÂÖ®Â±è"> <svg class="icon-maximize" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" />
                </svg> <svg class="icon-minimize" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3" />
                </svg> </button> <span id="music-playlist-btn">‚ò∞</span> </div>
          </div>
          <div id="music-player-avatar-display"> </div>
          <div id="music-info-top">
            <div style="display: flex; justify-content: center; align-items: center; gap: 10px;">
              <div id="music-time-counter">Â∑≤Áªè‰∏ÄËµ∑Âê¨‰∫Ü0.0Â∞èÊó∂</div> <button id="show-avatars-btn" title="ÊòæÁ§∫/ÈöêËóèÂ§¥ÂÉè"> <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="9" cy="7" r="4"></circle>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg> </button>
            </div>
            <div id="music-player-song-title">ËØ∑Ê∑ªÂä†Ê≠åÊõ≤</div>
            <div id="music-player-artist">...</div>
          </div>
          <div id="music-visual-container">
            <div id="vinyl-view"> <img id="music-player-cover" src="https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1757748720126_qdqqd_1jt5sv.jpeg" alt="Album Art"> </div>
            <div id="inline-lyrics-view">
              <div id="music-lyrics-container">
                <div id="music-lyrics-list"> </div>
              </div>
            </div>
          </div>
          <div id="single-lyric-display">‚ô™ ‚ô™ ‚ô™</div>
          <div class="music-player-controls-wrapper">
            <div class="music-progress-bar-container">
              <div id="music-current-time" class="time-display">0:00</div>
              <div class="progress-bar">
                <div id="music-progress-fill" class="progress-bar-fill"></div>
              </div>
              <div id="music-total-time" class="time-display">0:00</div>
            </div>
            <div class="music-controls"> <button id="music-prev-btn">‚óÄ</button> <button id="music-play-pause-btn" class="play-pause-btn">‚ñ∂</button> <button id="music-next-btn">‚ñ∂</button> <button id="music-mode-btn">È°∫Â∫è</button> <button id="toggle-blur-btn" title="ÂàáÊç¢ËÉåÊôØÊ∏ÖÊô∞Â∫¶">Ê∏Ö</button>
            </div>
          </div>
        </div>
      </div>
      <div id="music-playlist-panel">
        <div class="playlist-header">
          <div class="header-left-actions" style="display: flex; align-items: center; gap: 10px;">
            <span class="panel-btn" id="close-playlist-btn" data-lang-key="back">ËøîÂõû</span>
            <span class="panel-btn" id="manage-playlist-btn" data-lang-key="manage">ÁÆ°ÁêÜ</span>
          </div>
          
          <span data-lang-key="playlistTitle">Êí≠ÊîæÂàóË°®</span>
          
          <div>
            <span class="panel-btn" id="cleanup-songs-btn">Ê∏ÖÁêÜ</span> 
            <span class="panel-btn" id="add-song-local-btn">Êú¨Âú∞</span> 
            <span class="panel-btn" id="add-song-url-btn">URL</span> 
            <span class="panel-btn" id="add-song-search-btn" data-lang-key="search">ÊêúÁ¥¢</span>
          </div>
        </div>
        <div class="playlist-body" id="playlist-body"></div>
       <div id="playlist-action-bar">
        <label class="select-all-label" style="display: flex; align-items: center; gap: 5px;">
            <input type="checkbox" id="select-all-playlist-checkbox"> ÂÖ®ÈÄâ
        </label>
        <button id="upload-selected-to-catbox-btn" class="action-bar-btn" style="background-color: #007bff;">‰∏ä‰º†Catbox (0)</button>
      </div>
      </div> <input type="file" id="local-song-upload-input" accept="audio/*" multiple style="display: none;"> <input type="file" id="lrc-upload-input" accept=".lrc" style="display: none;">
    </div>

    <div id="wallpaper-screen" class="screen ios-settings-screen">
      <div class="header"> 
        <span class="back-btn" onclick="showScreen('home-screen')">‚Äπ</span> 
        <span data-lang-key="appearanceTitle">Â§ñËßÇËÆæÁΩÆ</span> 
        <span class="save-btn" id="save-wallpaper-btn" data-lang-key="save">ÂÆåÊàê</span> 
      </div>
      </div>
    
    <div id="octopus-mode-modal" class="modal">
        <div class="modal-content" style="width: 280px; height: auto;">
            <div class="modal-header">
                <span>üêô Â∞èÁ´†È±ºÊ®°Âºè</span>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <div class="form-group" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0;">
                    <label for="octopus-prompt-switch" style="margin-bottom: 0; font-weight: 500;">ÂêØÁî®ÁâπÊÆäÊèêÁ§∫ËØç</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="octopus-prompt-switch">
                        <span class="slider"></span>
                    </label>
                </div>
                <p style="font-size: 13px; color: #999; margin-top: 15px; line-height: 1.5; background: #f5f5f7; padding: 10px; border-radius: 8px;">
                    ÂºÄÂêØÂêéÔºåÁ≥ªÁªüÂ∞ÜÂàáÊç¢Ëá≥‚ÄúÂ∞èÁ´†È±º‚Äù‰∏ìÂ±û Prompt ÂèëÈÄÅÁªôÂ§ßÊ®°Âûã„ÄÇÂÖ≥Èó≠ÂàôÊÅ¢Â§çÈªòËÆ§ËÆæÁΩÆ„ÄÇ
                </p>
            </div>
            <div class="modal-footer">
                <button class="save" onclick="document.getElementById('octopus-mode-modal').classList.remove('visible')" style="width: 100%;">ÂÆåÊàê</button>
            </div>
        </div>
    </div>

<audio id="silent-audio-player" loop preload="auto" style="display:none;">
  <source src="https://phoebeboo.github.io/mewoooo/1-second-of-silence.mp3" type="audio/mpeg">
</audio><audio id="tts-audio-player" style="display:none;"></audio>

</body>
</html>
